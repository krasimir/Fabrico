<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>

<script src="../utils/js/jquery-1.6.3.min.js"></script>
<script src="../utils/js/jquery.snippet.min.js"></script>
<script src="../utils/js/scripts.js" type="text/javascript" language="JavaScript"></script>

<link rel="stylesheet" type="text/css" href="../utils/css/jquery.snippet.min.css">
<link rel="stylesheet" type="text/css" href="../stylesheet.css">
<link rel="stylesheet" type="text/css" href="architecture.css">
<link rel="start" href="../overview-summary.html">

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Sat, 31 Dec 2011 10:53:14 +0000">
    
<title>Fabrico</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">
<table id="summary_constructor">
    <tr><th colspan="2">Configuration of Fabrico</th></tr>
    <tr>
        <td class="description">
            
<p>
    The Fabrico class's constructor accepts an object which have the following structure:
</p>
<p>
<pre class="code">
{
    "brand": "[string]", // optional
    "benchmark": "[yes|no]", // optional
    "models": "[path_to_your_models_json_files]", // optional
    "adapters": "[path_to_json_file]", // required only if you use "models"
    "access": [ // optional
        <a href="#access_object">[access_object]</a>,
        <a href="#access_object">[access_object]</a>,
        ...
    ],
    "assets": "[path_to_json_file]", [ // the json file that contains array of <a href="#asset_object">[asset_object]</a>
    "views": [ // optional
        [path_to_your_views],
        [path_to_your_views],
        ...
    ], 
    "router": [ // optional
        <a href="#route_object">[route_object]</a>, 
        <a href="#route_object">[route_object]</a>, 
        ...
    ]
}
</pre>
</p>

<a name="access_object"></a>
<h3>Access object</h3>
<pre class="code">
{
    "username": "admin",
    "password": "admin",
    ... // custom properties (later they will be available via $req->fabrico->currentUser
}
</pre>

<a name="asset_object"></a>
<h3>Asset object</h3>
<pre class="code">
{
    "name": "[string]", // you will use this name later to fetch the asset
    "sourceToCompile": [ // the files will be merged to one
        "/assets/css/*.css",
        "/assets/customcss/*.css"
        ...
        ...
    ],
    "sourceToInclude": [ // the files will be included in separate tags
        "/assets/editor/*.css",
        ...
        ...
    ],
    "destination": "/assets/compiled/", // output folder
    "extension": "[css|js|...]",
    "preventCompiling": [true|false] // if you want to use the compiled file, but don't want to run the compilation
}
</pre>

<a name="route_object"></a>
<h3>Route object</h3>
<pre class="code">
{
    "url": "[regular_expression]", 
    "controller": "[path_to_controller_php]", 
    "model": "[path_to_model_json]" // optional
    "action": "[name_of_metod(default: run)]", // optional
    "priority": [true|false(default: false)] // optional
}
</pre>

<br /><br />
<h3>Example:</h3>
<pre class="code">
{
    "benchmark": "yes",
    "models": "/../config/models/",
    "adapters": "/../config/adapters.json",
    "assets": [
        {
            "name": "javascript", 
            "source": "/modules/js/*.js", 
            "destination": "/assets/compiled/",
            "extension": "js",
            "build": true
        },
        {
            "name": "css", 
            "source": "/assets/css/*.css", 
            "destination": "/assets/compiled/",
            "extension": "css",
            "build": true
        }
    ],
    "access": {
        "user": "admin",
        "pass": "admin"
    },
    "views": [
        "/views/Default"
    ],
    "router": [
        {
            "url": "/sample(.*)?", 
            "controller": "pages/Page.php", 
            "model": "sample.json", 
            "action": "run", 
            "priority": false
        },
        {
            "url": "/types(.*)?", 
            "controller": "pages/Page.php", 
            "model": "types.json", 
            "action": "run", 
            "priority": false
        },
        {
            "url": "/logout(.*)?", 
            "controller": "pages/Logout.php",
            "model": null,
            "action": "run", 
            "priority": false
        },
        {
            "url": "/login(.*)?", 
            "controller": "pages/Login.php",
            "model": null,
            "action": "run", 
            "priority": false
        },
        {
            "url": "(.*)?", 
            "controller": "pages/Home.php",
            "model": null,
            "action": "run", 
            "priority": false
        }
    ]
}
</pre>

        </td>
    </tr>
</table>
</body>

</html>